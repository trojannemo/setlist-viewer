<?xml version="1.0" encoding="utf-8" ?>
<ContentPage xmlns="http://schemas.microsoft.com/dotnet/2021/maui"
             xmlns:x="http://schemas.microsoft.com/winfx/2009/xaml"             
             xmlns:helpers="clr-namespace:SetlistViewer.Helpers"
             x:Class="SetlistViewer.DetailsPage"
             BackgroundColor="#6CA6CD">

    <NavigationPage.HasNavigationBar>False</NavigationPage.HasNavigationBar>
    
    <ContentPage.Resources>
        <ResourceDictionary>
            <helpers:RowColorConverter x:Key="RowColorConverter"/>
        </ResourceDictionary>
    </ContentPage.Resources>

    <Grid RowDefinitions="Auto, *" ColumnDefinitions="*, Auto">

        <StackLayout Grid.Row="0" Grid.Column="0" Spacing="5" Padding="10, 5, 0, 0">
            <Label x:Name="lblArtist" FontSize="24" TextColor="Black" FontAttributes="Bold" Margin="0,5,0,0"/>
            <Label x:Name="lblTitle" FontSize="20" TextColor="Black"/>
            <Label x:Name="LyricsLabel"
               Text="Lyrics"
               FontSize="20"
               IsVisible="False"
               FontAttributes="Bold"
               TextColor="White"
               GestureRecognizers="{TapGestureRecognizer Tapped='OnLyricsTapped'}"
               Margin="0,10,0,0"/>
            <Label x:Name="YouTubeLink"
               Text="Watch on YouTube"
                   FontSize="20"
               IsVisible="False"
                   FontAttributes="Bold"
               TextColor="White"
               GestureRecognizers="{TapGestureRecognizer Tapped='OnYouTubeTapped'}"
               Margin="0,0,0,0"/>
        </StackLayout>

        <Grid Grid.Row="0" Grid.Column="1">
            <Image x:Name="imgCover"
                   Source="default_cover.png"
               WidthRequest="150" 
               HeightRequest="150"
               Aspect="AspectFill"
               BackgroundColor="Gray">  
                <Image.GestureRecognizers>                
                    <TapGestureRecognizer NumberOfTapsRequired="1" Tapped="OnImageTapped" />
                </Image.GestureRecognizers>
            </Image>
        </Grid>
        
        <CollectionView x:Name="listViewDetails"
                    Grid.Row="1" Grid.ColumnSpan="2"
                    ItemsSource="{Binding SongDetails}"
                    SelectionMode="None"
                    VerticalScrollBarVisibility="Always">
            <CollectionView.ItemTemplate>
                <DataTemplate>
                    <Grid BackgroundColor="{Binding RowIndex, Converter={StaticResource RowColorConverter}}" Padding="10">
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>
                        <Label Text="{Binding Key}" FontSize="16" TextColor="Black" FontAttributes="Bold" Grid.Column="0" Margin="5"/>
                        <Label Text="{Binding Value}" FontSize="16" TextColor="Black" Grid.Column="1" Margin="5"/>
                    </Grid>
                </DataTemplate>
            </CollectionView.ItemTemplate>
        </CollectionView>              
    </Grid>
</ContentPage>
